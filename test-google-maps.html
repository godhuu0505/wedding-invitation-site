<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Google Maps テスト</title>
    <style>
        #map { 
            height: 400px; 
            width: 100%; 
            margin: 20px 0;
            border: 2px solid #e65555;
            border-radius: 8px;
        }
        body { 
            font-family: 'Noto Sans JP', sans-serif; 
            margin: 20px;
            background: #f9f9f9;
        }
        .status {
            padding: 10px;
            margin: 10px 0;
            border-radius: 4px;
            font-size: 14px;
        }
        .success { background: #d4edda; color: #155724; border: 1px solid #c3e6cb; }
        .error { background: #f8d7da; color: #721c24; border: 1px solid #f5c6cb; }
        .info { background: #d1ecf1; color: #0c5460; border: 1px solid #bee5eb; }
    </style>
</head>
<body>
    <h1>🗺️ Google Maps API テスト</h1>
    
    <div id="status-container">
        <div class="status info">Google Maps API を読み込み中...</div>
    </div>
    
    <div id="venue-info">
        <h3>📍 式場情報</h3>
        <p><strong>名前:</strong> <span id="venue-name">-</span></p>
        <p><strong>住所:</strong> <span id="venue-address">-</span></p>
        <p><strong>座標:</strong> <span id="venue-coordinates">-</span></p>
    </div>
    
    <div id="map"></div>
    
    <div id="instructions">
        <h3>🔧 設定確認</h3>
        <p>このテストページでGoogle Mapsが表示されない場合：</p>
        <ol>
            <li><code>.env.local</code> ファイルに <code>NEXT_PUBLIC_GOOGLE_MAPS_API_KEY</code> が設定されているか確認</li>
            <li>Google Cloud Console で Maps JavaScript API が有効になっているか確認</li>
            <li>APIキーの制限設定で <code>localhost</code> が許可されているか確認</li>
            <li>ブラウザのコンソール（F12）でエラーメッセージを確認</li>
        </ol>
    </div>

    <script>
        // 環境変数の確認（Next.jsの場合は実際のサイトで確認する必要があります）
        function updateStatus(message, type = 'info') {
            const container = document.getElementById('status-container');
            container.innerHTML = `<div class="status ${type}">${message}</div>`;
        }

        function updateVenueInfo() {
            // このテストページでは固定値を使用
            document.getElementById('venue-name').textContent = 'サンプルホテル';
            document.getElementById('venue-address').textContent = '東京都港区北青山３丁目５－１５';
            document.getElementById('venue-coordinates').textContent = '35.6762, 139.6503';
        }

        function initMap() {
            updateStatus('Google Maps API 読み込み成功！マップを初期化中...', 'success');
            
            const venue = {
                lat: 35.6762,
                lng: 139.6503
            };

            const map = new google.maps.Map(document.getElementById('map'), {
                zoom: 16,
                center: venue,
                styles: [
                    {
                        featureType: 'all',
                        stylers: [
                            { saturation: -20 },
                            { lightness: 10 }
                        ]
                    }
                ]
            });

            const marker = new google.maps.Marker({
                position: venue,
                map: map,
                title: 'サンプルホテル',
                icon: {
                    path: google.maps.SymbolPath.CIRCLE,
                    fillColor: '#e65555',
                    fillOpacity: 1,
                    strokeColor: '#ffffff',
                    strokeWeight: 3,
                    scale: 12
                }
            });

            const infoWindow = new google.maps.InfoWindow({
                content: `
                    <div style="padding: 10px; font-family: 'Noto Sans JP', sans-serif;">
                        <h3 style="margin: 0 0 8px 0; color: #e65555;">サンプルホテル</h3>
                        <p style="margin: 0; color: #666;">東京都港区北青山３丁目５－１５</p>
                    </div>
                `
            });

            marker.addListener('click', () => {
                infoWindow.open(map, marker);
            });

            updateStatus('✅ Google Maps が正常に表示されました！', 'success');
        }

        function handleMapError() {
            updateStatus('❌ Google Maps の読み込みに失敗しました。APIキーや設定を確認してください。', 'error');
        }

        // 初期化
        updateVenueInfo();

        // Google Maps API の読み込み（実際のAPIキーが必要）
        // このテストページを使用する場合は、手動でAPIキーを設定してください
        const apiKey = 'YOUR_API_KEY_HERE'; // 実際のAPIキーに置き換えてください
        
        if (apiKey === 'YOUR_API_KEY_HERE') {
            updateStatus('⚠️ このテストページを使用するには、スクリプト内のAPIキーを設定してください。', 'error');
        } else {
            const script = document.createElement('script');
            script.src = `https://maps.googleapis.com/maps/api/js?key=${apiKey}&callback=initMap&libraries=places`;
            script.onerror = handleMapError;
            document.head.appendChild(script);
        }
    </script>
</body>
</html>
